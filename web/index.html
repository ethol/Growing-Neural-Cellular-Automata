<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <script src="twgl.min.js"></script>
    <script type="module" src="./ca.js"></script>
    <script type="module" src="./demo.js"></script>
</head>

<body>

<d-title>
    <h1>Growing Neural Cellular Automata</h1>
    <p>Differentiable Model of Morphogenesis</p>
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
        <symbol id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path><path d="M0 0h24v24H0z" fill="none"></path></symbol>
        <symbol id="pauseIcon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></symbol>
        <symbol id="resetIcon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></symbol>
    </svg>

    <div class="l-body-outset grid" id="demo">

        <canvas id="demo-canvas" width="768" height="768"></canvas>

        <div id="demo-tip">
            <img id="pointer" src="images/pointer.svg">
            <div class="hint">
                Click or tap the image to erase the part of the pattern and see it regenerate.
                Double clicking places a new seed cell on the grid.
            </div>
        </div>

        <div id="demo-controls">
            <div id="pattern-selector">
            </div>
            <div>
            <span id="play-pause">
                <svg class="icon" id="play"><use xlink:href="#playIcon"></use></svg>
                <svg class="icon" id="pause" style="display: none;"><use xlink:href="#pauseIcon"></use></svg>
            </span>
                <svg class="icon" id="reset"><use xlink:href="#resetIcon"></use></svg>
            </div>
            <div>
                Speed: <span id="speedLabel"></span><br>
                <input type="range" id="speed" min="-3" max="3" step="1" value="0"><br>
                <div id="status">
                    Step <span id="stepCount"></span>
                    (<span id="ips"></span> step/s)
                </div>
            </div>
            <div id="model-selector">
                Model type:<br>
                <input type="radio" name="model" id="ex1"> <label for="ex1">Growing</label><br>
                <input type="radio" name="model" id="ex2"> <label for="ex2">Persistent</label><br>
                <input type="radio" name="model" id="ex3"> <label for="ex3">Regenerating</label><br>
            </div>
            <div style="white-space: nowrap;">
                Rotation <span id="rotationLabel"></span>&nbsp;<span class="hint"><a href="#experiment-4">[experiment 4]</a></span>
                <br>
                <input type="range" id="rotation" min="0" max="360" step="1" value="0"><br>
            </div>
            <div id='model-hints' class="hint">
            <span id="ex1-hint">
                <b>Growing</b> models were trained to generate patterns, 
                but don't know how to persist them. Some patterns explode, some decay,
                but some happen to be almost stable or even regenerate parts!

            </span>
                <span id="ex2-hint">
                <b>Persistent</b> models are trained to make the pattern stay for a prolonged
                period of time. Interstingly, they often develop some regenerative
                capabilities without being explicitly instructed to do so
                .
            </span>
                <span id="ex3-hint">
                <b>Regenerating</b> models were subject to pattern damages during
                training, so their regenerative capabilities are much stronger,
                especially in the central area.

            </span>
            </div>

        </div>
    </div>
</d-title>
<script type="module">
    import { createDemo } from './demo.js'
    createDemo('demo');
</script>
</body>
</html>